(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{xur1:function(t,n,e){"use strict";e.r(n),e.d(n,"AnalyticsModule",(function(){return Q}));var a=e("ofXK"),i=e("FfZp"),c=e("6rvT"),s=e("tyNb"),o=e("fXoL"),r=e("kmQS"),l=e("Rd8u"),b=e("bTqV");const d=function(){return{exact:!0}},h=function(t){return[t]};function p(t,n){if(1&t&&(o.Vb(0,"li",4),o.Vb(1,"a",5),o.Jc(2),o.Ub(),o.Ub()),2&t){const t=n.$implicit;o.Cb(1),o.nc("routerLinkActiveOptions",o.qc(3,d))("routerLink",o.rc(4,h,t.route)),o.Cb(1),o.Kc(t.name)}}function g(t,n){if(1&t&&(o.Vb(0,"header"),o.Vb(1,"h1",1),o.Jc(2,"Analytics"),o.Ub(),o.Vb(3,"ul",2),o.Hc(4,p,3,6,"li",3),o.Ub(),o.Ub()),2&t){const t=o.gc();o.Cb(4),o.nc("ngForOf",t.channels)}}let u=(()=>{class t{constructor(t){this.settings=t,this.channels=[]}ngOnInit(){this.channels=this.settings.get("vebto.admin.analytics.channels",[]).filter(t=>!t.condition||this.settings.get(t.condition))}ngOnDestroy(){const t=document.querySelector(".chartist-tooltip");t&&t.remove()}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(r.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["analytics-host"]],decls:2,vars:1,consts:[[4,"ngIf"],["trans",""],[1,"analytics-nav"],["class","analytics-nav-item",4,"ngFor","ngForOf"],[1,"analytics-nav-item"],["mat-button","","routerLinkActive","active","trans","",3,"routerLinkActiveOptions","routerLink"]],template:function(t,n){1&t&&(o.Hc(0,g,5,1,"header",0),o.Qb(1,"router-outlet")),2&t&&o.nc("ngIf",n.channels&&n.channels.length)},directives:[a.t,s.i,l.a,a.s,b.a,s.g,s.f],styles:["[_nghost-%COMP%]{display:block;position:relative}header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--be-background);box-shadow:none;border:1px solid var(--be-divider-default);padding:10px 15px;border-radius:4px;margin-bottom:25px}h1[_ngcontent-%COMP%]{font-size:2.2rem;margin:0;font-weight:300;text-transform:capitalize}.analytics-nav[_ngcontent-%COMP%]{margin-left:auto}.analytics-nav-item[_ngcontent-%COMP%]{display:inline-block;padding:0 5px;text-transform:capitalize}.active[_ngcontent-%COMP%]{background-color:var(--be-accent-default);color:var(--be-accent-contrast)}@media only screen and (max-width:768px){h1[_ngcontent-%COMP%]{display:none}.analytics-nav[_ngcontent-%COMP%]{margin-left:0}}"],changeDetection:0}),t})();var m=e("jtHE"),v=e("nYR2"),f=e("sPnx"),y=e("NFeN"),w=e("6SKC");function V(t,n){if(1&t&&(o.Vb(0,"div",6),o.Jc(1),o.hc(2,"number"),o.Ub()),2&t){const t=o.gc().$implicit;o.Cb(1),o.Kc(o.ic(2,1,t.value))}}function C(t,n){if(1&t&&(o.Vb(0,"div",6),o.Jc(1),o.hc(2,"formattedFileSize"),o.Ub()),2&t){const t=o.gc().$implicit;o.Cb(1),o.Kc(o.ic(2,1,t.value))}}function x(t,n){if(1&t&&(o.Vb(0,"div",1),o.Qb(1,"mat-icon",2),o.Vb(2,"div",3),o.Vb(3,"div",4),o.Jc(4),o.Ub(),o.Hc(5,V,3,3,"div",5),o.Hc(6,C,3,3,"div",5),o.Ub(),o.Ub()),2&t){const t=n.$implicit;o.Cb(1),o.nc("svgIcon",t.icon),o.Cb(3),o.Kc(t.name),o.Cb(1),o.nc("ngIf","number"===t.type),o.Cb(1),o.nc("ngIf","fileSize"===t.type)}}let U=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["analytics-header"]],inputs:{data:"data"},decls:1,vars:1,consts:[["class","stat",4,"ngFor","ngForOf"],[1,"stat"],[3,"svgIcon"],[1,"details"],["trans","",1,"name"],["class","count",4,"ngIf"],[1,"count"]],template:function(t,n){1&t&&o.Hc(0,x,7,4,"div",0),2&t&&o.nc("ngForOf",n.data)},directives:[a.s,y.a,l.a,a.t],pipes:[a.g,w.a],styles:["[_nghost-%COMP%]{display:flex;margin-bottom:25px;min-height:110px}@media only screen and (max-width:768px){[_nghost-%COMP%]{display:none}}.stat[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;min-width:0;margin-right:25px;border-radius:4px;height:110px;align-items:center;color:var(--be-text);background-color:var(--be-background);box-shadow:none;border:1px solid var(--be-divider-default);padding:0 15px}.stat[_ngcontent-%COMP%]:last-of-type{margin-right:0}.details[_ngcontent-%COMP%]{margin-left:10px}.details[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:2.3rem;font-family:Montserrat,sans-serif;color:var(--be-text)}.details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1.4rem;color:var(--be-secondary-text)}.details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.mat-icon[_ngcontent-%COMP%]{color:var(--be-accent-default);opacity:.8;width:60px;height:60px}"],changeDetection:0}),t})();var P=e("+lSV"),O=e("bv9b");function k(t,n){1&t&&o.Qb(0,"mat-progress-bar",3)}let M=(()=>{class t{constructor(t){this.http=t,this.loading$=new m.a(1),this.linkStats$=new m.a(1)}ngOnInit(){this.loading$.next(!0),this.http.get("admin/analytics/stats",{channel:"clicks"}).pipe(Object(v.a)(()=>this.loading$.next(!1))).subscribe(t=>{this.headerData=t.headerData,this.linkStats$.next(t.mainData)})}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(f.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["click-analytics-host"]],decls:5,vars:7,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[3,"data"],[3,"reports"],["mode","indeterminate","color","accent"]],template:function(t,n){1&t&&(o.Hc(0,k,1,0,"mat-progress-bar",0),o.hc(1,"async"),o.Qb(2,"analytics-header",1),o.Qb(3,"click-charts",2),o.hc(4,"async")),2&t&&(o.nc("ngIf",o.ic(1,3,n.loading$)),o.Cb(2),o.nc("data",n.headerData),o.Cb(1),o.nc("reports",o.ic(4,5,n.linkStats$)))},directives:[a.t,U,P.a,O.a],pipes:[a.b],styles:[".mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:55px}"],changeDetection:0}),t})();var J=e("xAXq");function _(t){var n;const e={type:J.b.LINE,labels:[],tooltip:"Pageviews",data:[[],[]]};return null===(n=null==t?void 0:t.current)||void 0===n||n.forEach((n,a)=>{var i;e.labels.push(function(t,n="en-US"){return new Date(1e3*t).toLocaleDateString(n,{weekday:"short"})}(n.date)),e.data[0].push(n.pageViews),e.data[1].push((null===(i=t.previous[a])||void 0===i?void 0:i.pageViews)||0)}),e}function I(t){const n={selector:".monthly-chart",type:J.b.LINE,labels:[],tooltip:"Pageviews",data:[[],[]]};return t&&t.current.forEach((e,a)=>{n.labels.push(""+(a+1)),n.data[0].push(e.pageViews);const i=t.previous[a];n.data[1].push(i?i.pageViews:0)}),n}function L(t=[]){return{type:J.b.PIE,tooltip:"Number of sessions",labels:t.map(t=>t.browser),data:t.map(t=>t.sessions),legend:!1,options:{showLabel:!0,donut:!0}}}function D(t=[]){return{selector:".countries-chart",type:J.b.PIE,tooltip:"Number of sessions",labels:t.map(t=>t.country),data:t.map(t=>t.sessions),options:{showLabel:!0,donut:!0}}}var $=e("L582");function H(t,n){1&t&&o.Qb(0,"mat-progress-bar",12)}const S=[{path:"",component:u,children:[{path:"",redirectTo:"links"},{path:"links",component:M},{path:"google",component:(()=>{class t{constructor(t){this.http=t,this.channel="default",this.chartHeight=400,this.loading$=new m.a(1)}ngOnInit(){this.loading$.next(!0),this.http.get("admin/analytics/stats",{channel:this.channel}).pipe(Object(v.a)(()=>this.loading$.next(!1))).subscribe(t=>{this.headerData=t.headerData,this.charts=this.generateCharts(t.mainData)})}generateCharts(t){return{weeklyPageViews:_(t.weeklyPageViews),monthlyPageViews:I(t.monthlyPageViews),browsers:L(t.browsers),countries:D(t.countries)}}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(f.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["default-analytics"]],decls:44,vars:12,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[3,"data"],[1,"content"],[1,"chart-row"],[1,"chart-wrapper"],[3,"chartConfig","height"],[1,"chart-header"],["trans","",1,"title"],["trans","",1,"subtitle"],[1,"chart-legend"],["trans","",1,"legend-item"],[1,"chart-wrapper","pie-wrapper"],["mode","indeterminate","color","accent"]],template:function(t,n){1&t&&(o.Hc(0,H,1,0,"mat-progress-bar",0),o.hc(1,"async"),o.Qb(2,"analytics-header",1),o.Vb(3,"div",2),o.Vb(4,"div",3),o.Vb(5,"div",4),o.Vb(6,"chart",5),o.Vb(7,"div",6),o.Vb(8,"div",7),o.Jc(9,"This Week vs Last Week"),o.Ub(),o.Vb(10,"div",8),o.Jc(11,"By page views"),o.Ub(),o.Ub(),o.Vb(12,"div",9),o.Vb(13,"div",10),o.Jc(14,"This week"),o.Ub(),o.Vb(15,"div",10),o.Jc(16,"Last week"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(17,"div",11),o.Vb(18,"chart",5),o.Vb(19,"div",6),o.Vb(20,"div",7),o.Jc(21,"Top Browsers"),o.Ub(),o.Vb(22,"div",8),o.Jc(23,"By sessions"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(24,"div",3),o.Vb(25,"div",4),o.Vb(26,"chart",5),o.Vb(27,"div",6),o.Vb(28,"div",7),o.Jc(29,"This Month vs Last Month"),o.Ub(),o.Vb(30,"div",8),o.Jc(31,"By page views"),o.Ub(),o.Ub(),o.Vb(32,"div",9),o.Vb(33,"div",10),o.Jc(34,"This month"),o.Ub(),o.Vb(35,"div",10),o.Jc(36,"Last month"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(37,"div",11),o.Vb(38,"chart",5),o.Vb(39,"div",6),o.Vb(40,"div",7),o.Jc(41,"Top Countries"),o.Ub(),o.Vb(42,"div",8),o.Jc(43,"By sessions"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.nc("ngIf",o.ic(1,10,n.loading$)),o.Cb(2),o.nc("data",n.headerData),o.Cb(4),o.nc("chartConfig",null==n.charts?null:n.charts.weeklyPageViews)("height",n.chartHeight),o.Cb(12),o.nc("chartConfig",null==n.charts?null:n.charts.browsers)("height",380),o.Cb(8),o.nc("chartConfig",null==n.charts?null:n.charts.monthlyPageViews)("height",n.chartHeight),o.Cb(12),o.nc("chartConfig",null==n.charts?null:n.charts.countries)("height",380))},directives:[a.t,U,$.a,l.a,O.a],pipes:[a.b],styles:[".mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:110px}"],changeDetection:0}),t})()}]}];let z=(()=>{class t{}return t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({factory:function(n){return new(n||t)},imports:[[s.h.forChild(S)],s.h]}),t})();var F=e("k3xQ"),N=e("Bjk8");let Q=(()=>{class t{}return t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({factory:function(n){return new(n||t)},imports:[[z,a.c,i.a,c.a,F.a,N.a,b.c,y.b,O.b]]}),t})()}}]);
//# sourceMappingURL=9-es2015.2feef82c485a0f8b3a42.js.map